{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "title": "Pektin Config",
    "description": "Pektin configuration file specification",
    "type": "object",
    "required": ["domain", "nameServers"],
    "properties": {
        "domain": {
            "type": "string",
            "description": "The main domain you want to use for your DNS server, api etc."
        },
        "nameServers": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "subDomain": { "type": "string" },
                    "ips": { "type": "array", "items": "string" },
                    "legacyIps": { "type": "array", "items": "string" }
                }
            },
            "description": "The subdomains you want to use for your nameservers"
        },
        "multiNode": {
            "type": "boolean",
            "description": "whether or not to run on multiple hosts"
        },
        "uiSubDomain": {
            "type": "string",
            "description": "The subdomain you want to use for accessing the user interface (if enabled)"
        },
        "apiSubDomain": {
            "type": "string",
            "description": "The subdomain you want to use for accessing Pektin API (if enabled)"
        },
        "vaultSubDomain": {
            "type": "string",
            "description": "The subdomain you want to use for accessing vault"
        },
        "recursorSubDomain": {
            "type": "string",
            "description": "The subdomain you want to use for accessing the recursor (if enabled)"
        },

        "enableUi": { "type": "boolean", "description": "Whether or not to enable the UI" },
        "enableApi": { "type": "boolean", "description": "Whether or not to enable the API" },
        "enableRecursor": {
            "type": "boolean",
            "description": "Whether or not to enable the private recursor"
        },

        "enableRotate": {
            "type": "boolean",
            "description": "Whether or not to auto rotate dns keys at the registrar"
        },
        "createCerts": {
            "type": "boolean",
            "description": "Whether or not to create certificates for the domains hosted on pektin"
        },
        "letsencryptEmail": {
            "type": "string",
            "description": "Required if createCerts is true"
        },

        "autoConfigureMainDomain": {
            "type": "boolean",
            "description": "create soa ns aaaa and a records for main domain on pektin after installation (Use registrar API to auto configure the necessary glue and ns records for your main domain)"
        },

        "proxyConfig": {
            "enum": ["none", "traefik"],
            "description": "What proxy config to apply to the containers"
        },
        "createProxy": {
            "type": "boolean",
            "description": "Whether or not to create the proxy container itself"
        },

        "buildFromSource": {
            "type": "boolean",
            "description": "Whether or not to build the pektin containers from source"
        },
        "dev": {
            "enum": ["local", "insecure-online"],
            "description": "Whether or not to run in development mode and if yes in what dev mode"
        },
        "insecureDevIp": {
            "type": "string",
            "description": "The ip you want to use for the dev server if running in 'insecure-online' dev mode"
        }
    }
}
